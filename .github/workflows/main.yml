name: CI

on: [push]

jobs:
  myjob:
    runs-on: self-hosted # linux required if you want to use docker
    steps:  
    - uses: actions/checkout@v2
    # Those steps are executed directly on the VM
    - run: echo Hello World
    - run: echo "# This is an autogenerated_release_file" > README.md
    - name: Pushes to another repository
    
      uses: cpina/github-action-push-to-another-repository@master
      env:
        API_TOKEN_GITHUB: ${{ secrets.API_TOKEN }}
      with:
        source-directory: .
        destination-github-username: 'marounayli'
        destination-repository-name: 'jenkinsbazel'
        user-email: marounayle@gmail.com
        target-branch: master
    - run: echo Finished
    - run: echo  $(pwd)
    - run: cd .. &&  git clone https://${{ secrets.API_TOKEN }}@github.com/marounayli/jenkinsbazel.git
